<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<style>
		div{
			height: 500px;
			border: 10px solid black;
			background-color: red;
			margin: 10px 0;
		}
	</style>
</head>

<body>
	<button onclick="up()">up</button>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<button onclick="down()">down</button>
	<script>
		let duration = 5*1000;//ms
		function up(){
			let startTime = new Date();
			loop(startTime);
		}
		function loop(startTime){
			console.log('loop');
			if(loop.percent == 1){
				loop.percent = 0;
				console.log('over');
				return;
			}
			loop.percent = move(0,document.body.scrollHeight,startTime);
			requestAnimationFrame(function(){
				loop(startTime);
			});
		}
		function down(){
			let startTime = new Date();
			loopDown(startTime);
		}
		function loopDown(startTime){
			console.log('loop');
			if(loopDown.percent == 1){
				loopDown.percent = 0;
				console.log('over');
				return;
			}
			loopDown.percent = move(document.body.scrollHeight,0,startTime);
			requestAnimationFrame(function(){
				loopDown(startTime);
			})
		}
		function move(start,target,startTime){
			let now = new Date();
			let percent = (now - startTime)/duration;
			percent = Math.pow(percent,3);
			let distance = start + (target-start)*percent;
			console.log(distance);
			window.scrollTo(0,distance);
			return Math.min(percent,1);
		}
	</script>
</body>

</html>
